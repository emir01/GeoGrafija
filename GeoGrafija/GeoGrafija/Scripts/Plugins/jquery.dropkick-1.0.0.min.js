(function(a,b,c){function s(b){return a.trim(b).length>0?b:false}function r(b,c){var d=b,e=[],f;d=d.replace("{{ id }}",c.id);d=d.replace("{{ label }}",c.label);d=d.replace("{{ tabindex }}",c.tabindex);if(c.options&&c.options.length){for(var g=0,h=c.options.length;g<h;g++){var j=a(c.options[g]),k="dk_option_current",l=i;l=l.replace("{{ value }}",j.val());l=l.replace("{{ current }}",s(j.val())===c.value?k:"");l=l.replace("{{ text }}",j.text());e[e.length]=l}}f=a(d);f.find(".dk_options_inner").html(e.join(""));return f}function q(a){var b=a.data("dropkick");a.find(".dk_options").css({top:a.find(".dk_toggle").outerHeight()-1});a.toggleClass("dk_open")}function p(a){a.removeClass("dk_open")}function o(a,b){var c=b.prevAll("li").outerHeight()*b.prevAll("li").length;a.find(".dk_options_inner").animate({scrollTop:c+"px"},0)}function n(a,b){b.find(".dk_option_current").removeClass("dk_option_current");a.addClass("dk_option_current");o(b,a)}function m(a,b,c){var d,e,f;d=a.attr("data-dk-dropdown-value");e=a.text();f=b.data("dropkick");$select=f.$select;$select.val(d);b.find(".dk_label").text(e);c=c||false;if(f.settings.change&&!c){f.settings.change.call($select,d,e)}}function l(a,b){var c=a.keyCode,d=b.data("dropkick"),e=b.find(".dk_options"),f=b.hasClass("dk_open"),h=b.find(".dk_option_current"),i=e.find("li").first(),j=e.find("li").last(),k,l;switch(c){case g.enter:if(f){m(h.find("a"),b);p(b)}else{q(b)}a.preventDefault();break;case g.up:l=h.prev("li");if(f){if(l.length){n(l,b)}else{n(j,b)}}else{q(b)}a.preventDefault();break;case g.down:if(f){k=h.next("li").first();if(k.length){n(k,b)}else{n(i,b)}}else{q(b)}a.preventDefault();break;default:break}}var d=false;if(a.browser.msie&&a.browser.version.substr(0,1)<7){d=true}else{c.documentElement.className=c.documentElement.className+" dk_fouc"}var e={},f=[],g={left:37,up:38,right:39,down:40,enter:13},h=['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}">','<a class="dk_toggle">','<span class="dk_label">{{ label }}</span>',"</a>",'<div class="dk_options">','<ul class="dk_options_inner">',"</ul>","</div>","</div>"].join(""),i='<li class="{{ current }}"><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',j={startSpeed:1e3,theme:false,change:false},k=false;e.init=function(b){b=a.extend({},j,b);return this.each(function(){var c=a(this),d=c.find(":selected").first(),e=c.find("option"),g=c.data("dropkick")||{},i=c.attr("id")||c.attr("name"),j=b.width||c.outerWidth(),k=c.attr("tabindex")?c.attr("tabindex"):"",l=false,m;if(g.id){return c}else{g.settings=b;g.tabindex=k;g.id=i;g.$original=d;g.$select=c;g.value=s(c.val())||s(d.attr("value"));g.label=d.text();g.options=e}l=r(h,g);l.find(".dk_toggle").css({width:j+"px"});c.before(l);l=a("#dk_container_"+i).fadeIn(b.startSpeed);m=b.theme?b.theme:"default";l.addClass("dk_theme_"+m);g.theme=m;g.$dk=l;c.data("dropkick",g);l.data("dropkick",g);f[f.length]=c;l.bind("focus.dropkick",function(a){l.addClass("dk_focus")}).bind("blur.dropkick",function(a){l.removeClass("dk_open dk_focus")});setTimeout(function(){c.hide()},0)})};e.theme=function(b){var c=a(this),d=c.data("dropkick"),e=d.$dk,f="dk_theme_"+d.theme;e.removeClass(f).addClass("dk_theme_"+b);d.theme=b};e.reset=function(){for(var a=0,b=f.length;a<b;a++){var c=f[a].data("dropkick"),d=c.$dk,e=d.find("li").first();d.find(".dk_label").text(c.label);d.find(".dk_options_inner").animate({scrollTop:0},0);n(e,d);m(e,d,true)}};a.fn.dropkick=function(a){if(!d){if(e[a]){return e[a].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof a==="object"||!a){return e.init.apply(this,arguments)}}};a(function(){a(".dk_toggle").live("click",function(c){var d=a(this).parents(".dk_container").first();q(d);if("ontouchstart"in b){d.addClass("dk_touch");d.find(".dk_options_inner").addClass("scrollable vertical")}c.preventDefault();return false});a(".dk_options a").live(a.browser.msie?"mousedown":"click",function(b){var c=a(this),d=c.parents(".dk_container").first(),e=d.data("dropkick");p(d);m(c,d);n(c.parent(),d);b.preventDefault();return false});a(c).bind("keydown.dk_nav",function(b){var c=a(".dk_container.dk_open"),d=a(".dk_container.dk_focus"),e=null;if(c.length){e=c}else if(d.length&&!c.length){e=d}if(e){l(b,e)}})})})(jQuery,window,document)